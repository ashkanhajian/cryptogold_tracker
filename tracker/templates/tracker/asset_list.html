<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>Ø±Ø¯ÛŒØ§Ø¨ Ù‚ÛŒÙ…Øª ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ</title>
    <style>
        body {
            font-family: sans-serif;
            background: #0f172a;
            color: #e5e7eb;
            direction: rtl;
        }
        h1 {
            text-align: center;
            margin-top: 30px;
        }
        .tables-wrapper {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        table {
            border-collapse: collapse;
            min-width: 360px;
            background: #020617;
        }
        th, td {
            border: 1px solid #1f2937;
            padding: 8px 12px;
            text-align: center;
            font-size: 14px;
        }
        th {
            background: #111827;
        }
        tr:nth-child(even) {
            background: #020617;
        }
        .exchange-title {
            text-align: center;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .change-pos {
            color: #4ade80;
        }
        .change-neg {
            color: #f97373;
        }
        a {
            color: #38bdf8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .updated {
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
            color: #9ca3af;
        }
    </style>
</head>
<body>
<h1>Ø±Ø¯ÛŒØ§Ø¨ Ù‚ÛŒÙ…Øª ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ ğŸ’¸</h1>

<div class="tables-wrapper">

    <!-- Nobitex -->
    <div>
        <div class="exchange-title">Ù†ÙˆØ¨ÛŒØªÚ©Ø³ (Ù‚ÛŒÙ…Øª ØªÙˆÙ…Ø§Ù†ÛŒ)</div>
        <table>
            <thead>
            <tr>
                <th>Ù†Ù…Ø§Ø¯</th>
                <th>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</th>
                <th>ØªØºÛŒÛŒØ± Û²Û´ Ø³Ø§Ø¹ØªÙ‡</th>
                <th>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</th>
            </tr>
            </thead>
            <tbody>
            {% for asset in nobitex_assets %}
                <tr>
                    <td>
                        {% if asset.symbol %}
                            <a href="{% url 'asset_history' asset.symbol %}">{{ asset.symbol }}</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ asset.price_usd|floatformat:0 }} ØªÙˆÙ…Ø§Ù†</td>

                    <td>
                        {% if asset.change_24h is not None %}
                            {% if asset.change_24h >= 0 %}
                                <span class="change-pos">+{{ asset.change_24h|floatformat:2 }}%</span>
                            {% else %}
                                <span class="change-neg">{{ asset.change_24h|floatformat:2 }}%</span>
                            {% endif %}
                        {% else %}
                            -
                        {% endif %}
                    </td>

                    <td>{{ asset.last_updated }}</td>
                </tr>
            {% empty %}
                <tr><td colspan="4">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù†ÙˆØ¨ÛŒØªÚ©Ø³ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tabdeal -->
    <div>
        <div class="exchange-title">ØªØ¨Ø¯ÛŒÙ„ (Ù‚ÛŒÙ…Øª ØªÙˆÙ…Ø§Ù†ÛŒ)</div>
        <table>
            <thead>
            <tr>
                <th>Ù†Ù…Ø§Ø¯</th>
                <th>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</th>
                <th>ØªØºÛŒÛŒØ± Û²Û´ Ø³Ø§Ø¹ØªÙ‡</th>
                <th>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</th>
            </tr>
            </thead>
            <tbody>
            {% for asset in tabdeal_assets %}
                <tr>
                    <td>
                        {% if asset.symbol %}
                            <a href="{% url 'asset_history' asset.symbol %}">{{ asset.symbol }}</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>

                    <td>{{ asset.price_usd|floatformat:0 }} ØªÙˆÙ…Ø§Ù†</td>

                    <td>
                        {% if asset.change_24h is not None %}
                            {% if asset.change_24h >= 0 %}
                                <span class="change-pos">+{{ asset.change_24h|floatformat:2 }}%</span>
                            {% else %}
                                <span class="change-neg">{{ asset.change_24h|floatformat:2 }}%</span>
                            {% endif %}
                        {% else %}
                            -
                        {% endif %}
                    </td>

                    <td>{{ asset.last_updated }}</td>
                </tr>
            {% empty %}
                <tr><td colspan="4">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø§Ø² ØªØ¨Ø¯ÛŒÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

</div>


<!-- Comparison Table -->
<div style="width: 100%; margin-top: 32px;">
    <div class="exchange-title">Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‚ÛŒÙ…Øª Ø¨ÛŒÙ† ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§</div>

    <table style="margin: 0 auto; margin-top: 8px;">
        <thead>
        <tr>
            <th>Ù†Ù…Ø§Ø¯</th>
            <th>Ù†ÙˆØ¨ÛŒØªÚ©Ø³ (ØªÙˆÙ…Ø§Ù†)</th>
            <th>ØªØ¨Ø¯ÛŒÙ„ (ØªÙˆÙ…Ø§Ù†)</th>
            <th>Ø§Ø±Ø²ÙˆÙ†â€ŒØªØ±</th>
            <th>Ø§Ø®ØªÙ„Ø§Ù ØªÙ‚Ø±ÛŒØ¨ÛŒ</th>
        </tr>
        </thead>

        <tbody>
        {% for item in comparisons %}
            <tr>
                <td>
                    {% if item.symbol %}
                        <a href="{% url 'asset_history' item.symbol %}">{{ item.symbol }}</a>
                    {% else %}
                        -
                    {% endif %}
                </td>

                <td>
                    {% if item.nobitex_price %}
                        {{ item.nobitex_price|floatformat:0 }}
                    {% else %}
                        -
                    {% endif %}
                </td>

                <td>
                    {% if item.tabdeal_price %}
                        {{ item.tabdeal_price|floatformat:0 }}
                    {% else %}
                        -
                    {% endif %}
                </td>

                <td>
                    {% if item.cheaper == "nobitex" %}
                        <span class="change-pos">Ù†ÙˆØ¨ÛŒØªÚ©Ø³</span>
                    {% elif item.cheaper == "tabdeal" %}
                        <span class="change-neg">ØªØ¨Ø¯ÛŒÙ„</span>
                    {% elif item.cheaper == "equal" %}
                        Ø¨Ø±Ø§Ø¨Ø±
                    {% else %}
                        -
                    {% endif %}
                </td>

                <td>
                    {% if item.diff_abs %}
                        {{ item.diff_abs|floatformat:0 }} ØªÙˆÙ…Ø§Ù†
                        {% if item.diff_pct %}
                            ({{ item.diff_pct|floatformat:2 }}%)
                        {% endif %}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="5">Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§ÛŒØ³Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</td></tr>
        {% endfor %}
        </tbody>

    </table>
</div>


<p class="updated">
    ØµÙØ­Ù‡ Ù‡Ø± Û³Û° Ø«Ø§Ù†ÛŒÙ‡ ÛŒÚ©Ø¨Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
</p>

<script>
    setInterval(function () {
        window.location.reload();
    }, 30000);
</script>

</body>
</html>
